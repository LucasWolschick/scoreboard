/*
    UF:
    inteiro:1
    add:1
    mul:3
    INST:
    lw: 1
    mul: 10
    sub: 2
    div: 40
    add: 2
*/

.data
    56 91 11 36 22 1 50 49 75 29 42 32 98 18 26 75 89 15 46 75 28 15 100 79 70
.text
    # r1 contém o endereço do ponteiro esquerdo (l)
    # r2 contém o endereço do ponteiro direito (r)
    # r3 contém o endereço central (m)
    # r4 contém o valor no ponteiro esquerdo
    # r5 contém o valor no ponteiro direito
    # r6 contém o valor no endereço central

    # r7 contém o índice do valor buscado

    # r10 contém o valor sendo buscado
    addi r10, r0, 49

    # r11 contém a constante 1
    # r12 contém a constante 2
    addi r11, r0, 1
    addi r12, r0, 2

    # inicializa r1, r2
    lw r1, 0(r0)
    lw r2, 96(r0)

    # LOOP:
    # while (l <= r)
    bgt r1, r2, 180 # EXIT

    # calcula m = l + (r - l) / 2
    sub r3, r2, r1
    div r3, r3, r12
    add r3, r1, r3
    
    # carrega r1, r2, r3 da memória para r4, r5, r6
    lw r4, 0(r1)
    lw r5, 0(r2)
    lw r6, 0(r3)

    # if (arr[m] == x)
    bne r6, r10, 160 # ELSE1
    add r7, r0, r3
    exit

    # ELSE1:
    # if (arr[m] < x)
    bgt r6, r10, 172 # ELSE2
    beq r6, r10, 172 # ELSE2
    addi r1, r3, 1

    # ELSE2:
    subi r2, r3, 1

    j 120 # LOOP

    # EXIT:
    exit